
###########################################################################
###########################################################################
# CONFIG ------------------------------------------------------------------

## PACKAGES ---------------------------------------------------------------
library(tidyverse)
library(rstan)
library(tidybayes)
library(bayesplot)
library(brms)


## PARALLEL ---------------------------------------------------------------
cores <- ifelse(parallel::detectCores() < 4, parallel::detectCores(), 4) ## Ensure computer has enough cores


###########################################################################
###########################################################################
# GENERATIVE MODELS -------------------------------------------------------

## DRAW DAGs ---------------------------------------------------------------
source(here::here('src/dags.R'))


###########################################################################
###########################################################################
# DATA PREPARATION --------------------------------------------------------


## IMPORT DATA -------------------------------------------------------------
data <- read_csv(here::here('data/data_clean.csv'))


## PREPARE OUTCOME DATA ------------------------------------------------------------
source(here::here('src/01-pre-processing/score-bipf.R'))


## SCALE PREDICTOR DATA ----------------------------------------------------------
source(here::here('src/01-pre-processing/scale-predictors.R'))


## PREPARE DATA ------------------------------------------------------------
source(here::here('src/02-pre-processing/prepare-data.R'))


###########################################################################
###########################################################################
# MODELLING: PRIORS -------------------------------------------------------


## PLOT PRIORS ------------------------------------------------------------
source(here::here('src/03-plot-priors.R'))
    
## PRIOR PREDICTIVE MODEL -------------------------------------------------
source(here::here('src/04-models/model-bivariate-prior.R'))
source(here::here('src/04-models/model-multivariate-prior.R'))

## PRIOR PREDICTIVE CHECK -------------------------------------------------



###########################################################################
###########################################################################
# MODELLING ---------------------------------------------------------------
source(here::here('src/04-models/model-bivariate.R'))
source(here::here('src/04-models/model-multivariate.R'))


###########################################################################
###########################################################################
# POST PROCESSING ---------------------------------------------------------
source(here::here('src/05-post-processing/spread-draws-multivariate.R'))



###########################################################################
###########################################################################
# MCMC DIAGNOSTICS ---------------------------------------------------------
source(here::here('src/06-mcmc-diagnostics/diagnostics.R'))



###########################################################################
###########################################################################
# POSTERIOR PREDICTIVE CHECK ----------------------------------------------

  


###########################################################################
###########################################################################
# POSTERIOR DISTRIBUTION ----------------------------------------------------


## PLOT POSTERIOR ----------------------------------------------------------


## SUMMARIZE POSTERIOR -----------------------------------------------------



###########################################################################
###########################################################################
# PREDICTIONS -------------------------------------------------------------


